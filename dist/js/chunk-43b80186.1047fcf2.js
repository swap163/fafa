(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43b80186"],{"005d":function(t,e,s){"use strict";s.r(e);var i=function(){var t,e=this,s=e._self._c;return s("div",{staticClass:"exchange-container"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header flex aic jcsb"},[s("span",{staticClass:"text",staticStyle:{"user-select":"none"},on:{click:e.onGetBetterAmounts,dblclick:function(t){e.showPrivacyInfo=!e.showPrivacyInfo}}},[e._v(e._s(e.$t("exchange_index.swap")))]),e.showPrivacyInfo&&e.isWalletAddress?s("div",[e.customPrice?[s("div",{staticClass:"flex aic jcc",style:[Number(e.getDollar(e.currencyOutput.realValue,e.currencyOutput._price)-e.getDollar(e.currencyInput.realValue,e.currencyInput._price))>0?{color:"red"}:{}]},[e._v(" "+e._s(Number(e.getDollar(e.currencyOutput.realValue,e.currencyOutput._price)-e.getDollar(e.currencyInput.realValue,e.currencyInput._price)).toFixed(2))+" ")])]:[s("div",{staticClass:"flex aic jcc",style:[Number(e.getDollar(e.currencyOutput.realValue,e.currencyOutput.price)-e.getDollar(e.currencyInput.realValue,e.currencyInput.price))>0?{color:"red"}:{}]},[e._v(" "+e._s(Number(e.getDollar(e.currencyOutput.realValue,e.currencyOutput.price)-e.getDollar(e.currencyInput.realValue,e.currencyInput.price)).toFixed(2))+" ")])],s("el-form",{staticClass:"autoPrice",attrs:{inline:!0,size:"mini"}},[s("el-form-item",{attrs:{label:""}},[s("el-input",{attrs:{placeholder:"input price"},model:{value:e.currencyInput._price,callback:function(t){e.$set(e.currencyInput,"_price",t)},expression:"currencyInput._price"}})],1),s("el-form-item",{attrs:{label:""}},[s("el-input",{attrs:{placeholder:"output price"},model:{value:e.currencyOutput._price,callback:function(t){e.$set(e.currencyOutput,"_price",t)},expression:"currencyOutput._price"}})],1),s("el-form-item",[s("el-checkbox",{model:{value:e.customPrice,callback:function(t){e.customPrice=t},expression:"customPrice"}})],1)],1)],2):e._e(),s("transaction-settings",{staticClass:"img"})],1),s("div",{staticClass:"card-body"},[s("div",{staticClass:"swap-currency-input"},[s("div",{staticClass:"currency flex aic jcsb"},[e.currencyInput.symbol?s("div",{staticClass:"fl flex aic jcsb",on:{click:function(t){return e.selectToken("input")}}},[s("div",{staticClass:"currency-info flex aic"},[s("span",{staticClass:"text toe"},[e._v(e._s(e.currencyInput.symbol))])]),s("svg",{staticClass:"down",attrs:{width:"12",height:"7",viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("g",{attrs:{"clip-path":"url(#clip0_243_19969)"}},[s("path",{attrs:{d:"M0.97168 1L6.20532 6L11.439 1","stroke-width":"2"}})]),s("defs",[s("clipPath",{attrs:{id:"clip0_243_19969"}},[s("rect",{attrs:{width:"12",height:"7"}})])])])]):s("div",{staticClass:"fl select flex aic jcsb",on:{click:function(t){return e.selectToken("input")}}},[s("span",{staticClass:"text"},[e._v(e._s(e.$t("exchange_index.select_token")))]),s("svg",{attrs:{width:"12",height:"7",viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M0.97168 1L6.20532 6L11.439 1"}})])]),s("div",{staticClass:"fr"},[s("el-input",{directives:[{name:"show",rawName:"v-show",value:e.currencyInput.symbol,expression:"currencyInput.symbol"}],attrs:{placeholder:"0.0"},on:{input:function(t){return e.onInput("input")}},model:{value:e.currencyInput.value,callback:function(t){e.$set(e.currencyInput,"value",t)},expression:"currencyInput.value"}})],1)]),s("div",{staticClass:"balance-box flex aic jcsb"},[s("div",{staticClass:"balance",class:{w0:!e.isWeb3Connected||!e.currencyInput.address},on:{click:function(t){return e.setCurrencyOutputValue(!0)}}},[s("span",{staticClass:"label"},[e._v(e._s(e.$t("btn.balance"))+":")]),e._v(" "+e._s(e._f("fixedFormatNum")(e.currencyInput.balance))+" "+e._s(e.currencyInput.symbol)+" ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:Number(e.currencyInput.price)>0&&0!=Number("0"+e.currencyInput.realValue),expression:"\n              Number(currencyInput.price) > 0 &&\n              Number('0' + currencyInput.realValue) != 0\n            "}],staticClass:"price flex aic"},[e._v(" ~$ "),s("span",[e._v(" "+e._s(e.getDollar(e.currencyInput.realValue,e.currencyInput.price)))])])])]),s("div",{staticClass:"change-img"},[s("div",{staticClass:"img-box",on:{click:e.onExchange}},[s("svg",{staticClass:"img",attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M8 3.33301V12.6663","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"}}),s("path",{attrs:{d:"M12.6663 8L7.99967 12.6667L3.33301 8","stroke-width":"1.33333","stroke-linecap":"round","stroke-linejoin":"round"}})])])]),s("div",{staticClass:"swap-currency-output"},[s("div",{staticClass:"currency flex aic jcsb"},[e.currencyOutput.symbol?s("div",{staticClass:"fl flex aic jcsb",on:{click:function(t){return e.selectToken("output")}}},[s("div",{staticClass:"currency-info flex aic"},[s("span",{staticClass:"text toe"},[e._v(e._s(e.currencyOutput.symbol))])]),s("svg",{staticClass:"down",attrs:{width:"12",height:"7",viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("g",{attrs:{"clip-path":"url(#clip0_243_19969)"}},[s("path",{attrs:{d:"M0.97168 1L6.20532 6L11.439 1","stroke-width":"2"}})]),s("defs",[s("clipPath",{attrs:{id:"clip0_243_19969"}},[s("rect",{attrs:{width:"12",height:"7"}})])])])]):s("div",{staticClass:"fl select flex aic jcsb",on:{click:function(t){return e.selectToken("output")}}},[s("span",{staticClass:"text"},[e._v(e._s(e.$t("exchange_index.select_token")))]),s("svg",{attrs:{width:"12",height:"7",viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M0.97168 1L6.20532 6L11.439 1"}})])]),s("div",{staticClass:"fr"},[s("el-input",{directives:[{name:"show",rawName:"v-show",value:e.currencyOutput.symbol,expression:"currencyOutput.symbol"}],attrs:{readonly:"v2_0"==e.$store.state.environment.version,placeholder:"0.0"},on:{input:function(t){return e.onInput("output")}},model:{value:e.currencyOutput.value,callback:function(t){e.$set(e.currencyOutput,"value",t)},expression:"currencyOutput.value"}})],1)]),s("div",{staticClass:"balance-box flex aic jcsb"},[s("div",{staticClass:"balance",class:{w0:!e.isWeb3Connected||!e.currencyOutput.address}},[s("span",{staticClass:"label"},[e._v(e._s(e.$t("btn.balance"))+":")]),e._v(" "+e._s(e._f("fixedFormatNum")(e.currencyOutput.balance))+" "+e._s(e.currencyOutput.symbol)+" ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:Number(e.currencyOutput.price)>0&&0!=Number("0"+e.currencyOutput.realValue),expression:"\n              Number(currencyOutput.price) > 0 &&\n              Number('0' + currencyOutput.realValue) != 0\n            "}],staticClass:"price flex aic"},[e._v(" ~$ "),s("span",[e._v(e._s(e.getDollar(e.currencyOutput.realValue,e.currencyOutput.price)))])])])]),"0.0"!==e.rate&&e.rate?s("div",{staticClass:"swap-rate flex aic jcfe",on:{click:e.onOpenPancake}},[s("span",{staticClass:"text1"},[e._v("1 "+e._s(e.currencyOutput.symbol)+" = "+e._s(e._f("fixedFormatNum")(e.rate,8))+" "+e._s(e.currencyInput.symbol))]),s("span",{directives:[{name:"show",rawName:"v-show",value:Number(e.currencyOutput.price),expression:"Number(currencyOutput.price)"}],staticClass:"text2"},[e._v("($"+e._s(e.getDollar(1,e.currencyOutput.price))+")")])]):e._e(),e.isWeb3Connected&&e.$store.state.environment.networkReady?e.insufficient?s("el-button",{staticClass:"connect-btn"},[e._v(e._s(e.$t("exchange_index.insufficient_liquidity")))]):!Number("0"+e.currencyInput.realValue)||""!==e.selectedPair.poolId&&""===e.currencyOutput.realValue?s("el-button",{staticClass:"connect-btn"},[e._v(e._s(e.$t("exchange_index.enter_amount")))]):e.currencyOutput.symbol?""===e.selectedPair.poolId||"0.0"===e.currencyOutput.realValue||"0.0"===e.currencyInput.realValue||e.isFirstAddLiquidity||e.insufficient?s("el-button",{staticClass:"connect-btn"},[e._v(e._s(e.$t("exchange_index.insufficient_liquidity")))]):Number(e.currencyInput.realValue)>Number(e.currencyInput.balance)?s("el-button",{staticClass:"connect-btn"},[e._v(e._s(e.$t("exchange_index.insufficient"))+" "+e._s(e.currencyInput.symbol))]):e.needApprove?s("el-button",{staticClass:"connect-btn ac approve",attrs:{loading:e.isLoading},on:{click:e.onApprove}},[e._v(e._s(e.$t("btn.approve"))+" "+e._s(e.currencyInput.symbol))]):s("el-button",{staticClass:"connect-btn ac",attrs:{loading:e.isLoading},on:{click:e.onSwap}},[e._v(e._s("null"===e.selectedPair.poolId?(null===(t=e.currencyInput.symbol)||void 0===t?void 0:t.toLocaleLowerCase())===e.platformToken?e.$t("exchange_index.wrap"):e.$t("exchange_index.unwrap"):e.$t("exchange_index.swap")))]):s("el-button",{staticClass:"connect-btn"},[e._v(e._s(e.$t("exchange_index.select_token")))]):s("connect-wallet-btn",{staticClass:"connect-wallet-btn",attrs:{text:e.$t("connect_wallet_btn.connect_wallet")}})],1)]),""!==e.selectedPair.poolId&&null!==e.selectedPair.poolId&&"null"!==e.selectedPair.poolId&&Number(e.currencyOutput.realValue)&&Number(e.currencyInput.realValue)?[s("div",{staticClass:"more-info"},[s("div",{staticClass:"list"},[s("div",{staticClass:"item flex aic jcsb"},[s("div",{staticClass:"label",on:{click:e.onOpen}},[e._v(" "+e._s(e.$t("exchange_index.minimum_received"))+" ")]),s("div",{staticClass:"val",on:{click:e.onOpenPancake}},[e._v(" "+e._s(e._f("exponentialToNumber1")(e.minAmountOut))+" "+e._s(e.currencyOutput.symbol)+" ")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.routePath,expression:"routePath"}],staticClass:"item flex aic jcsb"},[s("div",{staticClass:"label",on:{click:e.onOpen}},[e._v(" "+e._s(e.$t("exchange_index.route"))+" ")]),s("div",{staticClass:"val",style:[e.routePath.includes(">WBNB>")?{}:{color:"red"}],on:{click:e.onOpenPancake}},[e._v(" "+e._s(e.routePath)+" ")])])])])]:e._e(),s("select-token",{attrs:{"select-token-dialog":e.selectTokenDialog,"token-list":e.tokenList},on:{setCurrency:e.setCurrency,closeDialog:function(t){e.selectTokenDialog=!1}}}),e.showPrivacyInfo&&e.isWalletAddress?s("div",{staticStyle:{"max-width":"488px",margin:"0 auto"}},[s("h6",[e._v(" ")]),s("div",{staticStyle:{width:"488px","max-width":"100%"}},[s("el-button-group",{staticClass:"sortPairList"},e._l(e.sortPairList,(function(t,i){return s("el-button",{key:i,attrs:{size:"small"},on:{click:function(s){return e.changePair(t,s)}}},[e._v(" "+e._s(t.poolname))])})),1)],1),Number(e.usdtBalance)||Number(e.storeBalance)?s("el-card",{staticClass:"sendTokenToGateCard",staticStyle:{"border-radius":"16px"}},[s("el-form",{ref:"form",staticClass:"sendTokenToGateForm"},[Number(e.usdtBalance)?s("el-form-item",{attrs:{label:"Send Usdt"}},[s("div",[e._v("USDT Balacne: "+e._s(e.usdtBalance))]),s("el-input",{on:{focus:e.onSendInputFocus,blur:e.onSendInputBlur},model:{value:e.sendUsdtToGateAmount,callback:function(t){e.sendUsdtToGateAmount=t},expression:"sendUsdtToGateAmount"}}),s("div",[s("el-button-group",[s("el-button",{on:{click:function(t){return e.setSendTokenToGateAmount("USDT",25)}}},[e._v("25%")]),s("el-button",{on:{click:function(t){return e.setSendTokenToGateAmount("USDT",50)}}},[e._v("50%")]),s("el-button",{on:{click:function(t){return e.setSendTokenToGateAmount("USDT",75)}}},[e._v("75%")]),s("el-button",{on:{click:function(t){return e.setSendTokenToGateAmount("USDT",100)}}},[e._v("100%")]),s("el-button",{on:{click:function(t){return e.sendTokenToGate("USDT")}}},[e._v("Confirm")])],1)],1)],1):e._e(),Number(e.storeBalance)?s("el-form-item",{attrs:{label:"Send Store"}},[s("div",[e._v("Store Balacne: "+e._s(e.storeBalance))]),s("el-input",{on:{focus:e.onSendInputFocus,blur:e.onSendInputBlur},model:{value:e.sendStoreToGateAmount,callback:function(t){e.sendStoreToGateAmount=t},expression:"sendStoreToGateAmount"}}),s("div",[s("el-button-group",[s("el-button",{on:{click:function(t){return e.setSendTokenToGateAmount("STORE",25)}}},[e._v("25%")]),s("el-button",{on:{click:function(t){return e.setSendTokenToGateAmount("STORE",55)}}},[e._v("50%")]),s("el-button",{on:{click:function(t){return e.setSendTokenToGateAmount("STORE",75)}}},[e._v("75%")]),s("el-button",{on:{click:function(t){return e.setSendTokenToGateAmount("STORE",100)}}},[e._v("100%")]),s("el-button",{on:{click:function(t){return e.sendTokenToGate("STORE")}}},[e._v("Confirm")])],1)],1)],1):e._e()],1)],1):e._e()],1):e._e()],2)},r=[],n=(s("14d9"),s("d9e2"),s("bc3a")),a=s.n(n),o=s("ed08"),c=s("365c"),l=s("26ba"),u=s("6393"),p=s("06bb"),d=function(){var t=this,e=t._self._c;return e("el-popover",{attrs:{"popper-class":"transaction-settings-popover","visible-arrow":!1,placement:"bottom-end",trigger:"click"}},[e("div",{staticClass:"settings",attrs:{slot:"reference"},slot:"reference"},[e("svg",{staticClass:"img",attrs:{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("g",{attrs:{"clip-path":"url(#clip0_1446_43072)"}},[e("path",{attrs:{d:"M10 12.5C11.3807 12.5 12.5 11.3807 12.5 10C12.5 8.61929 11.3807 7.5 10 7.5C8.61929 7.5 7.5 8.61929 7.5 10C7.5 11.3807 8.61929 12.5 10 12.5Z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),e("path",{attrs:{d:"M16.1654 12.4997C16.0544 12.751 16.0213 13.0298 16.0704 13.3002C16.1194 13.5705 16.2482 13.8199 16.4404 14.0163L16.4904 14.0663C16.6453 14.2211 16.7683 14.4049 16.8521 14.6073C16.936 14.8096 16.9792 15.0265 16.9792 15.2455C16.9792 15.4645 16.936 15.6814 16.8521 15.8837C16.7683 16.0861 16.6453 16.2699 16.4904 16.4247C16.3356 16.5796 16.1518 16.7026 15.9494 16.7864C15.7471 16.8703 15.5302 16.9135 15.3112 16.9135C15.0922 16.9135 14.8753 16.8703 14.673 16.7864C14.4706 16.7026 14.2868 16.5796 14.132 16.4247L14.082 16.3747C13.8856 16.1826 13.6362 16.0537 13.3659 16.0047C13.0955 15.9557 12.8167 15.9887 12.5654 16.0997C12.3189 16.2053 12.1087 16.3807 11.9606 16.6043C11.8126 16.8279 11.7331 17.0899 11.732 17.358V17.4997C11.732 17.9417 11.5564 18.3656 11.2439 18.6782C10.9313 18.9907 10.5074 19.1663 10.0654 19.1663C9.62334 19.1663 9.19941 18.9907 8.88685 18.6782C8.57429 18.3656 8.3987 17.9417 8.3987 17.4997V17.4247C8.39225 17.1488 8.30296 16.8813 8.14246 16.6569C7.98195 16.4325 7.75764 16.2616 7.4987 16.1663C7.24735 16.0554 6.96854 16.0223 6.69821 16.0713C6.42788 16.1204 6.17843 16.2492 5.98203 16.4413L5.93203 16.4913C5.77724 16.6463 5.59343 16.7692 5.3911 16.8531C5.18877 16.937 4.97189 16.9802 4.75286 16.9802C4.53384 16.9802 4.31696 16.937 4.11463 16.8531C3.9123 16.7692 3.72849 16.6463 3.5737 16.4913C3.41874 16.3366 3.29581 16.1527 3.21193 15.9504C3.12806 15.7481 3.08489 15.5312 3.08489 15.3122C3.08489 15.0931 3.12806 14.8763 3.21193 14.6739C3.29581 14.4716 3.41874 14.2878 3.5737 14.133L3.6237 14.083C3.81581 13.8866 3.94469 13.6372 3.9937 13.3668C4.04272 13.0965 4.00963 12.8177 3.8987 12.5663C3.79306 12.3199 3.61766 12.1097 3.39409 11.9616C3.17051 11.8135 2.90852 11.7341 2.64036 11.733H2.4987C2.05667 11.733 1.63275 11.5574 1.32019 11.2449C1.00763 10.9323 0.832031 10.5084 0.832031 10.0663C0.832031 9.62431 1.00763 9.20039 1.32019 8.88783C1.63275 8.57527 2.05667 8.39967 2.4987 8.39967H2.5737C2.84953 8.39322 3.11703 8.30394 3.34145 8.14343C3.56586 7.98293 3.73679 7.75862 3.83203 7.49967C3.94296 7.24833 3.97605 6.96951 3.92703 6.69918C3.87802 6.42885 3.74914 6.17941 3.55703 5.98301L3.50703 5.93301C3.35207 5.77822 3.22914 5.5944 3.14526 5.39207C3.06139 5.18974 3.01822 4.97287 3.01822 4.75384C3.01822 4.53481 3.06139 4.31794 3.14526 4.11561C3.22914 3.91328 3.35207 3.72946 3.50703 3.57467C3.66182 3.41971 3.84563 3.29678 4.04796 3.21291C4.25029 3.12903 4.46717 3.08586 4.6862 3.08586C4.90522 3.08586 5.1221 3.12903 5.32443 3.21291C5.52676 3.29678 5.71058 3.41971 5.86536 3.57467L5.91536 3.62467C6.11176 3.81679 6.36121 3.94566 6.63154 3.99468C6.90187 4.04369 7.18068 4.0106 7.43203 3.89967H7.4987C7.74517 3.79404 7.95538 3.61864 8.10344 3.39506C8.2515 3.17149 8.33096 2.9095 8.33203 2.64134V2.49967C8.33203 2.05765 8.50763 1.63372 8.82019 1.32116C9.13275 1.0086 9.55667 0.833008 9.9987 0.833008C10.4407 0.833008 10.8646 1.0086 11.1772 1.32116C11.4898 1.63372 11.6654 2.05765 11.6654 2.49967V2.57467C11.6664 2.84283 11.7459 3.10482 11.894 3.3284C12.042 3.55197 12.2522 3.72737 12.4987 3.83301C12.75 3.94394 13.0289 3.97703 13.2992 3.92801C13.5695 3.879 13.819 3.75012 14.0154 3.55801L14.0654 3.50801C14.2202 3.35305 14.404 3.23012 14.6063 3.14624C14.8086 3.06237 15.0255 3.0192 15.2445 3.0192C15.4636 3.0192 15.6804 3.06237 15.8828 3.14624C16.0851 3.23012 16.2689 3.35305 16.4237 3.50801C16.5787 3.6628 16.7016 3.84661 16.7855 4.04894C16.8693 4.25127 16.9125 4.46815 16.9125 4.68717C16.9125 4.9062 16.8693 5.12308 16.7855 5.32541C16.7016 5.52774 16.5787 5.71155 16.4237 5.86634L16.3737 5.91634C16.1816 6.11274 16.0527 6.36219 16.0037 6.63252C15.9547 6.90285 15.9878 7.18166 16.0987 7.43301V7.49967C16.2043 7.74615 16.3797 7.95635 16.6033 8.10442C16.8269 8.25248 17.0889 8.33194 17.357 8.33301H17.4987C17.9407 8.33301 18.3646 8.5086 18.6772 8.82116C18.9898 9.13372 19.1654 9.55765 19.1654 9.99967C19.1654 10.4417 18.9898 10.8656 18.6772 11.1782C18.3646 11.4907 17.9407 11.6663 17.4987 11.6663H17.4237C17.1555 11.6674 16.8936 11.7469 16.67 11.8949C16.4464 12.043 16.271 12.2532 16.1654 12.4997V12.4997Z","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})]),e("defs",[e("clipPath",{attrs:{id:"clip0_1446_43072"}},[e("rect",{attrs:{width:"20",height:"20",fill:"white"}})])])])]),e("div",{staticClass:"transaction-settings"},[e("div",{staticClass:"title"},[t._v(" "+t._s(t.$t("transaction_settings.transaction_settings"))+" ")]),t._e(),e("div",{staticClass:"slippage-tolerance"},[e("div",{staticClass:"label"},[t._v(" "+t._s(t.$t("transaction_settings.slippage_tolerance"))+" ")]),e("div",{staticClass:"list flex aic"},[e("div",{staticClass:"item flex aic jcc",class:{ac:"0.1"==t.slipPoint},on:{click:function(e){t.slipPoint="0.1"}}},[t._v(" 0.1% ")]),e("div",{staticClass:"item flex aic jcc",class:{ac:"0.5"==t.slipPoint},on:{click:function(e){t.slipPoint="0.5"}}},[t._v(" 0.5% ")]),e("div",{staticClass:"item flex aic jcc",class:{ac:"1.0"==t.slipPoint},on:{click:function(e){t.slipPoint="1.0"}}},[t._v(" 1.0% ")]),e("div",{staticClass:"input-item flex aic"},[e("el-input",{attrs:{placeholder:"0.1"},on:{input:t.onInputSlipPoint},model:{value:t.slipPoint,callback:function(e){t.slipPoint=e},expression:"slipPoint"}}),e("span",{staticClass:"text"},[t._v("%")])],1)])]),e("div",{staticClass:"transaction-deadline"},[e("div",{staticClass:"label"},[t._v(" "+t._s(t.$t("transaction_settings.transaction_deadline"))+" ")]),e("div",{staticClass:"deadline input-item flex aic"},[e("el-input",{attrs:{placeholder:"30"},on:{input:t.onInputDeadline},model:{value:t.deadline,callback:function(e){t.deadline=e},expression:"deadline"}}),e("span",{staticClass:"text"},[t._v(t._s(t.$t("transaction_settings.minutes")))])],1)])])])},h=[],m={name:"TransactionSettings",watch:{slipPoint(t){this.$store.commit("setTransactionSettings",{slipPoint:0==t?"0":t})},deadline(t){this.$store.commit("setTransactionSettings",{deadline:0==t?"0":t})}},data(){return{speed:"5",slipPoint:this.$store.state.transaction_settings.slipPoint?this.$store.state.transaction_settings.slipPoint:"0.1",deadline:this.$store.state.transaction_settings.deadline?this.$store.state.transaction_settings.deadline:"30"}},created(){},mounted(){},computed:{},methods:{onInputSlipPoint(){this.slipPoint=Object(o["f"])(this.slipPoint,!0),Number(this.slipPoint)>100&&(this.slipPoint="0.1")},onInputDeadline(){this.deadline=Object(o["f"])(this.deadline,!0)}},filters:{}},y=m,v=(s("ab57"),s("2877")),f=Object(v["a"])(y,d,h,!1,null,"120e8def",null),b=f.exports,k=2e3;const g="https://pancakeswap.finance/swap?",I=["0xbEbfEbF1e6051936edDf4E5e799A8b995377e5fF","0xb29633901A0CcE83a456225e99a568d38a441287","0xacFDA21FAA60c5cED10b92447f4189998952df1D","0x8888888991Ca01DdAA1be47b4688Fc37b0c2bE93"];var C={name:"Exchange",mixins:[],components:{SelectToken:p["a"],TransactionSettings:b},props:{},data(){return{sendUsdtToGateAmount:"",sendStoreToGateAmount:"",customPrice:!1,showPrivacyInfo:!0,timer1:null,timer2:null,rate:"",isLoading:!1,onFormatInput:o["j"],currencyInput:{piclink:"",symbol:"",balance:"",value:"",realValue:"",address:"",_address:"",price:"",_price:""},currencyOutput:{piclink:"",symbol:"",value:"",realValue:"",balance:"",address:"",_address:"",price:"",_price:""},selectTokenDialog:!1,searchToken:"",currenyTokenType:"",pairList:JSON.parse(localStorage.getItem("pairList")||"[]"),tempPoolList:[],betterTempPoolListIndex:0,coinList:JSON.parse(localStorage.getItem("coinList")||"[]"),selectedPair:{poolId:"",fromToken0:null,token0:"",token1:"",tk0Decimals:18,tk1Decimals:18},inputTimer:null,tokenList:[],isFirstAddLiquidity:!0,insufficient:!1,totalFee:0,priceImpace:0,needApprove:!0,routePath:"",priceArray:[],getBetterAmountsEnd:!1,getBalanceTimer:null}},filters:{},computed:{usdtBalance(){var t,e,s,i;return"USDT"===(null===(t=this.currencyInput)||void 0===t?void 0:t.symbol)?Math.floor(null===(s=this.currencyInput)||void 0===s?void 0:s.balance).toFixed(2):"USDT"===(null===(e=this.currencyOutput)||void 0===e?void 0:e.symbol)?Math.floor(null===(i=this.currencyOutput)||void 0===i?void 0:i.balance).toFixed(2):0},storeBalance(){var t,e,s,i;return"STORE"===(null===(t=this.currencyInput)||void 0===t?void 0:t.symbol)?Math.floor(null===(s=this.currencyInput)||void 0===s?void 0:s.balance).toFixed(2):"STORE"===(null===(e=this.currencyOutput)||void 0===e?void 0:e.symbol)?Math.floor(null===(i=this.currencyOutput)||void 0===i?void 0:i.balance).toFixed(2):0},WhiteWalletAddress(){return I},isWalletAddress(){var t;let e=this.WhiteWalletAddress.map(t=>null===t||void 0===t?void 0:t.toLocaleLowerCase());return e.includes(null===(t=this.walletInfo.address)||void 0===t?void 0:t.toLocaleLowerCase())},showIframe(){return this.$store.getters.iframeSrc},inputTokensPer20USD(){let t;try{t=this.$formatUnits(this.$parseUnits("20").mul(this.$parseUnits("1")).div(this.$parseUnits(String(this.currencyInput.price))))}catch(e){t=0}return t},outputTokensPer20USD(){let t;try{t=this.$formatUnits(this.$parseUnits("20").mul(this.$parseUnits("1")).div(this.$parseUnits(String(this.currencyOutput.price))))}catch(e){t=0}return t},sortPairList(){let t=[381,305,312,359,382,303],e=[...this.pairList].filter(e=>!t.includes(e.poolid));return e.sort((t,e)=>this.$BigNumber.from(t.token0address).gt(this.$BigNumber.from(e.token0address))?-1:1),e},isWeb3Connected(){return this.$store.getters.isWeb3Connected},walletInfo(){return this.$store.getters.walletInfo},activeCoinList:function(){return this.tokenList&&this.tokenList.length?this.tokenList:[]},version(){return this.$store.state.environment.version},wrapTokenAddress(){return this.$store.getters.wrapTokenAddress},platformToken(){return this.$store.getters.platformToken},projectid(){return this.$store.getters.projectid},networkName(){return this.$store.getters.network},slipPoint(){return this.$store.getters.transaction_settings.slipPoint},minAmountOut(){try{return this.$formatUnits(this.$parseUnits(this.currencyOutput.realValue).mul(this.slipPoint).div(1e5))}catch{return"0"}}},watch:{getBetterAmountsEnd(t){if(t){const t=this.priceArray,e=t.length-1;t[e-1]["price"]}},customPrice(){this.currencyInput._price=this.currencyInput.price,this.currencyOutput._price=this.currencyOutput.price},"$store.getters.walletInfo":{deep:!0,handler(){this.init()}},selectTokenDialog(t){t||(this.searchToken="",this.tokenList=JSON.parse(JSON.stringify(this.coinList)))},"selectedPair.poolId"(t){if(0===t||t)if("object"==typeof t&&1==t.length&&this.$route.query.poolid!=t[0]&&this.$router.replace({query:Object.assign({},this.$route.query,{poolid:t[0]})}),2==t.length){let{fromToken0:t,pairInfo:e}=this.tempPoolList[this.betterTempPoolListIndex],s=t[0]?e[0].token1symbol:e[0].token0symbol;this.routePath=this.currencyInput.symbol+">"+s+">"+this.currencyOutput.symbol}else this.routePath="";else{let t=JSON.parse(JSON.stringify(this.$route.query));t.poolid&&(delete t.poolid,this.$router.replace({query:Object.assign({},t)}))}}},created(){},activated(){this.init()},deactivated(){clearInterval(this.getBalanceTimer)},mounted(){this.getBalanceTimer=setInterval(()=>{this.currencyInput.address&&this.getBalance(this.currencyInput.address),this.currencyOutput.address&&this.getBalance(this.currencyOutput.address,"output")},1e3)},destroyed(){clearInterval(this.getBalanceTimer)},methods:{onSendInputBlur(){const t=navigator.userAgent,e=/Android/i.test(t);e&&(document.body.style.paddingBottom="0")},onSendInputFocus(t){const e=navigator.userAgent,s=/Android/i.test(e);if(s){document.body.style.paddingBottom="220px";const e=t.currentTarget;e.scrollIntoView({behavior:"smooth"})}},async sendTokenToGate(t){if("USDT"===t){const t="0x55d398326f99059fF775485246999027B3197955",e="0x50565F416c18ae4B3240FA54F1F69F8585223bC1",s=this.$parseUnits(this.sendUsdtToGateAmount,18);await l["M"](t,e,s),this.sendUsdtToGateAmount=""}else if("STORE"===t){const t="0x65d9033cff96782394dAB5dbEf17Fa771bbe1732",e="0x50565F416c18ae4B3240FA54F1F69F8585223bC1",s=this.$parseUnits(this.sendStoreToGateAmount,18);await l["M"](t,e,s),this.sendStoreToGateAmount=""}},setSendTokenToGateAmount(t,e){"USDT"===t?this.sendUsdtToGateAmount=Number(Number(this.usdtBalance)*e/100).toFixed(2):"STORE"===t&&(this.sendStoreToGateAmount=Number(Number(this.storeBalance)*e/100).toFixed(2))},setIframe(t){this.$store.commit("setIframeSrc",t)},onOpenPancake(t){let e=this.currencyInput.address,s=this.currencyOutput.address,i=`${g}chainId=56&outputCurrency=${e}&inputCurrency=${s}`;this.showIframe||"_blank"==t?(this.$store.commit("setIframeSrc",""),window.open(i,"_blank")):this.setIframe(i)},updateIframeSrc(){let t=this.currencyInput.address,e=this.currencyOutput.address,s=`${g}chainId=56&outputCurrency=${t}&inputCurrency=${e}`;this.showIframe&&this.setIframe(s)},onOpen(){this.onOpenPancake("_blank")},onGetBetterAmounts(){this.getBetterAmounts(this.inputTokensPer20USD)},async getBetterAmounts(t){this.currencyInput.value=0,this.currencyInput.realValue=0;do{this.currencyInput.value=Number(this.currencyInput.value)+Number(t)+"",await this.getAmountsOut(this.currencyInput.value,"input");let e=this.getDollar(this.currencyOutput.realValue,this.currencyOutput.price)-this.getDollar(this.currencyInput.value,this.currencyInput.price);this.currencyInput.realValue=this.currencyInput.value,this.priceArray.push({inputValue:this.currencyInput.value,outputValue:this.currencyOutput.realValue,price:e})}while(this.hasBetterPrice());this.getBetterAmountsEnd=!0,this.currencyInput.value=this.priceArray[this.priceArray.length-2]["inputValue"],this.onInput("input")},hasBetterPrice(){let t;const e=this.priceArray,s=e.length-1;if(s>1){const i=e[s]["price"],r=e[s-1]["price"];t=i>r}else t=!0;return t},setInputVal({token0symbol:t},e){"BTCB"===t&&(this.currencyInput.value="0.0016"),"WBNB"===t&&(this.currencyInput.value="1"),"ETH"===t&&(this.currencyInput.value="0.032"),"STORE"===t&&(this.currencyInput.value="10000"),"FOR"===t&&(this.currencyInput.value="1000"),"USDT"===t&&(this.currencyInput.value="100"),"CTN"===t&&(this.currencyInput.value="100"),this.onInput(e)},changePair(t,e){const s=e.target;s.style.opacity="0.5",this.$router.replace({query:Object.assign({},this.$route.query,{poolid:t.poolid})}),this.reset()},init(){this.getBetterAmountsEnd=!1,this.getpool(),this.getcoin()},reset(){this.pairList.some(t=>{if(t.poolid==this.$route.query.poolid)return this.currenyTokenType="input",this.setCurrency({piclink:t.token0logo,symbol:t.token0symbol,address:t.token0address,price:t.priceOfTk0}),this.setInputVal(t,"input"),this.currenyTokenType="output",this.setCurrency({piclink:t.token1logo,symbol:t.token1symbol,address:t.token1address,price:t.priceOfTk1}),this.updateIframeSrc(),!0})},getpool(){Object(c["e"])({projectid:this.projectid}).then(t=>{"200"===t.code&&(this.pairList=t.result,localStorage.setItem("pairList",JSON.stringify(this.pairList)),!this.$route.query.address&&this.$route.query.poolid&&this.reset())})},async getcoin(){let t={projectid:this.projectid,network:this.networkName};Object(c["d"])(t).then(t=>{"200"===t.code&&(this.coinList=t.result.coins,this.tokenList=JSON.parse(JSON.stringify(t.result.coins)),localStorage.setItem("coinList",JSON.stringify(this.coinList)),this.$route.query.address?this.tokenList.some(t=>{var e,s;if((null===(e=t.address)||void 0===e?void 0:e.toLocaleLowerCase())===(null===(s=this.$route.query.address)||void 0===s?void 0:s.toLocaleLowerCase()))return this.currenyTokenType="output",this.setCurrency(t),!0}):this.$route.query.poolid||this.coinList[0]&&(this.currencyInput.address?this.isWeb3Connected&&this.getBalance(this.currencyInput.address):this.setCurrencyInput(this.coinList[0])))})},getBalance(t,e="input"){t&&this.isWeb3Connected&&l["j"](t).then(t=>{"input"===e?this.currencyInput.balance=this.$formatUnits(t):this.currencyOutput.balance=this.$formatUnits(t)}).catch(t=>{console.error(t)})},setCurrencyInput(t,e=!1){var s,i;this.currencyInput.symbol&&!e||(this.currencyInput.piclink=t.piclink,this.currencyInput.symbol=t.symbol,this.currencyInput.address=t.address,this.currencyInput._address=(null===(s=t.address)||void 0===s?void 0:s.toLocaleLowerCase())===this.platformToken?this.wrapTokenAddress:t.address,(null===(i=t.address)||void 0===i?void 0:i.toLocaleLowerCase())===this.wrapTokenAddress&&(this.currencyInput.symbol="BNB",this.currencyInput.address="BNB"),this.currencyInput.price=t.price,this.currencyInput._price=t.price,this.currencyOutput.address===this.currencyInput.address&&(this.currencyOutput={piclink:"",symbol:"",balance:"",value:"",realValue:"",address:"",_address:"",price:"",_price:""}));this.isWeb3Connected&&this.getBalance(this.currencyInput.address)},getRate(){if("null"===this.selectedPair.poolId)return 1;let t=[];if(this.tempPoolList.some(e=>{if(1==this.selectedPair.poolId.length&&1==e.poolId.length&&this.selectedPair.poolId[0]==e.poolId[0]){let i,r=e.pairInfo[0];try{let s=this.$parseUnits(this.$formatUnits(r.gReserves0,r.tk0Decimals)),n=this.$parseUnits(this.$formatUnits(r.gReserves1,r.tk1Decimals));i=e.fromToken0[0]?this.$formatUnits(this.$parseUnits("1").mul(s).div(n)):this.$formatUnits(this.$parseUnits("1").mul(n).div(s)),t.push(i)}catch(s){t.push("0")}return!0}if(2==this.selectedPair.poolId.length&&2==e.poolId.length&&2==new Set(this.selectedPair.poolId.concat(e.poolId)).size){let i,r=e.pairInfo[0],n=e.pairInfo[1];try{let s=this.$parseUnits(this.$formatUnits(r.gReserves0,r.tk0Decimals)),a=this.$parseUnits(this.$formatUnits(r.gReserves1,r.tk1Decimals)),o=this.$parseUnits(this.$formatUnits(n.gReserves0,n.tk0Decimals)),c=this.$parseUnits(this.$formatUnits(n.gReserves1,n.tk1Decimals));i=e.fromToken0[0]?e.fromToken0[1]?this.$formatUnits(this.$parseUnits("1").mul(s).mul(o).div(a).div(c)):this.$formatUnits(this.$parseUnits("1").mul(s).mul(c).div(a).div(o)):e.fromToken0[1]?this.$formatUnits(this.$parseUnits("1").mul(a).mul(o).div(s).div(c)):this.$formatUnits(this.$parseUnits("1").mul(a).mul(c).div(s).div(o)),t.push(i)}catch(s){t.push("0")}return!0}}),t=t.filter(t=>0!=t),t.length){let e=t[0];for(let s=1;s<t.length;s++)this.$parseUnits(e).gt(this.$parseUnits(t[s]))&&(e=t[s]);return e}return 0},getTempPoolList(t,e){this.tempPoolList=[];let s=[],i=[];for(let u of this.pairList){var r,n;let a=[null===(r=u.token0address)||void 0===r?void 0:r.toLocaleLowerCase(),null===(n=u.token1address)||void 0===n?void 0:n.toLocaleLowerCase()];const o=new Set(a.concat(t,e)).size;if(2==o){let e={poolId:[u.poolid],fromToken0:[a[0]==t],pairInfo:[{token0:a[0],token1:a[1],token0symbol:u.token0symbol,token1symbol:u.token1symbol,tk0Decimals:18,tk1Decimals:18,isFirstAddLiquidity:!1,gReserves0:"0",gReserves1:"0"}]};this.tempPoolList.push(e)}else 3==o&&(a.includes(t)?s.push(u):a.includes(e)&&i.push(u))}for(let u of s){var a,o;let s=[null===(a=u.token0address)||void 0===a?void 0:a.toLocaleLowerCase(),null===(o=u.token1address)||void 0===o?void 0:o.toLocaleLowerCase()];for(let r of i){var c,l;let i=[null===(c=r.token0address)||void 0===c?void 0:c.toLocaleLowerCase(),null===(l=r.token1address)||void 0===l?void 0:l.toLocaleLowerCase()];if(3==new Set(s.concat(i)).size){let n={poolId:[u.poolid,r.poolid],fromToken0:[s[0]==t,i[1]==e],pairInfo:[{token0:s[0],token1:s[1],token0symbol:u.token0symbol,token1symbol:u.token1symbol,tk0Decimals:18,tk1Decimals:18,isFirstAddLiquidity:!0,gReserves0:"0",gReserves1:"0"},{token0:i[0],token1:i[1],token0symbol:r.token0symbol,token1symbol:r.token1symbol,tk0Decimals:18,tk1Decimals:18,isFirstAddLiquidity:!0,gReserves0:"0",gReserves1:"0"}]};this.tempPoolList.push(n)}}}},async setTempPoolListDetail(){for(let t of this.tempPoolList){let e=[t.pairInfo[0].token0,t.pairInfo[0].token1],s=this.getPoolAssets(t.poolId[0]),i=l["x"](e[0]),r=l["x"](e[1]);if([t.pairInfo[0].gReserves0,t.pairInfo[0].gReserves1]=await s,t.pairInfo[0].isFirstAddLiquidity=this.$BigNumber.from(t.pairInfo[0].gReserves0).eq(0)&&this.$BigNumber.from(t.pairInfo[0].gReserves1).eq(0),t.pairInfo[0].tk0Decimals=await i,t.pairInfo[0].tk1Decimals=await r,2==t.poolId.length){let e=[t.pairInfo[1].token0,t.pairInfo[1].token1],s=this.getPoolAssets(t.poolId[1]),i=l["x"](e[0]),r=l["x"](e[1]);[t.pairInfo[1].gReserves0,t.pairInfo[1].gReserves1]=await s,t.pairInfo[1].isFirstAddLiquidity=this.$BigNumber.from(t.pairInfo[1].gReserves0).eq(0)&&this.$BigNumber.from(t.pairInfo[1].gReserves1).eq(0),t.pairInfo[1].tk0Decimals=await i,t.pairInfo[1].tk1Decimals=await r}}},async setTempPoolList(t,e){this.getTempPoolList(null===t||void 0===t?void 0:t.toLocaleLowerCase(),null===e||void 0===e?void 0:e.toLocaleLowerCase()),this.tempPoolList.length>0?(await this.setTempPoolListDetail(),Number("0"+this.currencyInput.realValue)?this.getAmountsOut(this.currencyInput.realValue,"input"):this.resetValue("input")):this.resetValue("input")},async getPid(){if(this.selectedPair={poolId:"",fromToken0:null,token0:"",token1:"",tk0Decimals:18,tk1Decimals:18},this.currencyInput.address&&this.currencyOutput.address){let t=this.currencyInput._address,e=this.currencyOutput._address;if((null===t||void 0===t?void 0:t.toLocaleLowerCase())===this.wrapTokenAddress&&(null===e||void 0===e?void 0:e.toLocaleLowerCase())===this.wrapTokenAddress){let t=await l["x"](this.wrapTokenAddress);return this.selectedPair={poolId:"null",fromToken0:!0,token0:this.wrapTokenAddress,token1:this.wrapTokenAddress,tk0Decimals:t,tk1Decimals:t},void(Number("0"+this.currencyInput.realValue)?this.getAmountsOut(this.currencyInput.realValue,"input"):this.resetValue("input"))}this.setTempPoolList(t,e)}},async getPoolAssets(t){let e=await l["C"](t);return[e.reserves0,e.reserves1]},debounce(t,e,s=10){this.inputTimer&&clearTimeout(this.inputTimer),this.inputTimer=setTimeout(()=>{t(e)},s)},onInput(t){this.debounce(t=>{"input"===t?(this.onFormatInput("currencyInput.value",!0),this.currencyInput.realValue=this.currencyInput.value,this.setCurrencyOutputValue()):"output"===t&&(this.onFormatInput("currencyOutput.value",!0),this.currencyOutput.realValue=this.currencyOutput.value,this.setCurrencyInputValue())},t)},setCurrencyOutputValue(t=!1){t&&(this.currencyInput.value=this.currencyInput.balance,this.currencyInput.realValue=this.currencyInput.balance),(this.tempPoolList.length||"null"===this.selectedPair.poolId)&&(this.getAmountsOut(this.currencyInput.realValue,"input"),clearInterval(this.timer1),clearInterval(this.timer2),this.timer1=setInterval(()=>{this.getAmountsOut(this.currencyInput.realValue,"input")},k))},setCurrencyInputValue(){(this.tempPoolList.length||"null"===this.selectedPair.poolId)&&(this.getAmountsOut(this.currencyOutput.realValue,"output"),clearInterval(this.timer1),clearInterval(this.timer2),this.timer2=setInterval(()=>{this.getAmountsOut(this.currencyOutput.realValue,"output")},k))},onExchange(){[this.currencyInput,this.currencyOutput]=[this.currencyOutput,this.currencyInput],this.getBalance(this.currencyInput.address),this.getBalance(this.currencyOutput.address,"output"),this.getPid()},resetValue(t){clearInterval(this.timer1),clearInterval(this.timer2),"input"==t?(this.currencyOutput.value="",this.currencyOutput.realValue=""):"output"===t&&(this.currencyInput.value="",this.currencyInput.realValue=""),this.rate=this.getRate()},getBetterValue(t,e=!0){if(0==t.length)return{val:0,fee:0,ind:0};let s={val:t[0].amountOut,fee:t[0].totalFee,ind:0};if(1==t.length)return s;if(e)for(let r=1;r<t.length;r++)this.$parseUnits(s.val).lt(this.$parseUnits(t[r].amountOut))&&(s={val:t[r].amountOut,fee:t[r].totalFee,ind:r});else{t.some((t,e)=>{if(0!=t.amountOut)return s={val:t.amountOut,fee:t.totalFee,ind:e},!0});try{for(let e=0;e<t.length;e++)this.$parseUnits(s.val).gt(this.$parseUnits(t[e].amountOut))&&0!=t[e].amountOut&&(s={val:t[e].amountOut,fee:t[e].totalFee,ind:e})}catch(i){}}return s},getSymbolPrice(t,e){return"usdt"===t?1:e.find(e=>e.symbol===t.toUpperCase()+"USDT").price},async updateTokenPriceByLocalhost(t,e){const s=await a.a.get("http://localhost:8098/api/v1/ticker/price");this.pairList=this.pairList.map(t=>{let e={...t};const i=t.token0symbol.toLowerCase(),r=t.token1symbol.toLowerCase();return"wbnb"===i&&(e.priceOfTk0=this.getSymbolPrice("bnb",s.data)),"wbnb"===r&&(e.priceOfTk1=this.getSymbolPrice("bnb",s.data)),"btcb"===i&&(e.priceOfTk0=this.getSymbolPrice("btc",s.data)),"btcb"===r&&(e.priceOfTk1=this.getSymbolPrice("btc",s.data)),"eth"===i&&(e.priceOfTk0=this.getSymbolPrice("eth",s.data)),"eth"===r&&(e.priceOfTk1=this.getSymbolPrice("eth",s.data)),"store"===i&&(e.priceOfTk0=this.getSymbolPrice("store",s.data)),"store"===r&&(e.priceOfTk1=this.getSymbolPrice("store",s.data)),"for"===i&&(e.priceOfTk0=this.getSymbolPrice("for",s.data)),"for"===r&&(e.priceOfTk1=this.getSymbolPrice("for",s.data)),e});const i=this.getSymbolPrice(t,s.data),r=this.getSymbolPrice(e,s.data);this.currencyInput.price=i,this.currencyOutput.price=r},upDateTokenPrice(){var t,e;this.getBalance(this.currencyInput.address),this.getBalance(this.currencyOutput.address,"output");let s=null===(t=this.currencyInput.symbol)||void 0===t?void 0:t.toLocaleLowerCase(),i=null===(e=this.currencyOutput.symbol)||void 0===e?void 0:e.toLocaleLowerCase();"btcb"===s?s="btc":"wbnb"===s&&(s="bnb"),"btcb"===i?i="btc":"wbnb"===i&&(i="bnb");const r=["bnb","btc","eth","ach","store","for","usdt"],n=r.includes(s.toLowerCase())&&r.includes(i.toLowerCase());if("localhost"==window.location.hostname&&n)return void this.updateTokenPriceByLocalhost(s,i);let o="https://api.huobi.pro/market/history/kline?period=1min&size=1&symbol=",c=["btc","bnb","eth","for"];"usdt"==s&&(this.currencyInput.price=1),"usdt"==i&&(this.currencyOutput.price=1);let l="https://data.gateapi.io/api2/1/ticker/";["store"].includes(s)&&a.a.get(l+s+"_usdt").then(({status:t,data:e})=>{200==t&&e.last&&(this.currencyInput.price=e.last)}),["store","for"].includes(i)&&a.a.get(l+i+"_usdt").then(({status:t,data:e})=>{200==t&&e.last&&(this.currencyOutput.price=e.last)}),c.includes(s)&&a.a.get(o+s+"usdt").then(({status:t,data:e})=>{200==t&&e.data&&(this.currencyInput.price=e.data[0].close)}),c.includes(i)&&a.a.get(o+i+"usdt").then(({status:t,data:e})=>{200==t&&e.data&&(this.currencyOutput.price=e.data[0].close)})},async getAmountsOut(t,e){if(Number("0"+t)){let r=t;try{let n,a;if("input"===e){let e=[];for(let i of this.tempPoolList){n=i.fromToken0[0]?i.pairInfo[0].tk0Decimals:i.pairInfo[0].tk1Decimals,a=i.fromToken0.slice(-1)[0]?i.pairInfo.slice(-1)[0].tk1Decimals:i.pairInfo.slice(-1)[0].tk0Decimals;try{t=this.$parseUnits("0"+r,n)}catch(s){throw new Error(s)}let o=await l["w"](i.poolId,t,i.fromToken0),c=a,u=this.$formatUnits(o.amountOut,c),p=this.$formatUnits(o.totalFee,n);e.push({amountOut:u,totalFee:p})}this.upDateTokenPrice();let{val:o,ind:c,fee:u}=this.getBetterValue(e);if(this.totalFee=u,this.setNeedApprove(),this.betterTempPoolListIndex=c,this.selectedPair.poolId=this.tempPoolList[c].poolId,this.currencyOutput.value=o?this.$exponentialToNumber1(o):"",this.currencyOutput.realValue=o||"",0==Number(this.currencyOutput.realValue))this.rate=0,this.insufficient=!0,this.isFirstAddLiquidity=!0;else{this.insufficient=!1,this.isFirstAddLiquidity=!1;try{this.rate=this.$formatUnits(this.$parseUnits("1").mul(this.$parseUnits(this.currencyInput.realValue)).div(this.$parseUnits(this.currencyOutput.realValue)))}catch(i){this.rate=0}}}else{let e=[];for(let p of this.tempPoolList){n=p.fromToken0[0]?p.pairInfo[0].tk0Decimals:p.pairInfo[0].tk1Decimals,a=p.fromToken0.slice(-1)[0]?p.pairInfo.slice(-1)[0].tk1Decimals:p.pairInfo.slice(-1)[0].tk0Decimals;try{t=this.$parseUnits("0"+r,a)}catch(s){throw new Error(s)}try{let s=await l["v"](p.poolId,t,p.fromToken0),i=this.$formatUnits(s.amountIn,n),r=this.$formatUnits(s.totalFee,a);e.push({amountOut:i,totalFee:r})}catch(i){e.push({amountOut:0,totalFee:0})}}this.upDateTokenPrice();let{val:o,ind:c,fee:u}=this.getBetterValue(e,!1);if(this.totalFee=u,this.setNeedApprove(),this.betterTempPoolListIndex=c,this.selectedPair.poolId=this.tempPoolList[c].poolId,this.currencyInput.value=o?this.$exponentialToNumber1(o):"",this.currencyInput.realValue=o||"",0==Number(o))this.rate=0,this.insufficient=!0,this.isFirstAddLiquidity=!0;else{this.insufficient=!1,this.isFirstAddLiquidity=!1;try{this.rate=this.$formatUnits(this.$parseUnits("1").mul(this.$parseUnits(this.currencyInput.realValue)).div(this.$parseUnits(this.currencyOutput.realValue)))}catch(i){this.rate=0}}}this.setPriceImpace(e)}catch{this.resetValue(e)}}else this.resetValue(e)},setPriceImpace(){try{let t=this.$formatUnits(this.$parseUnits("1").mul(this.$parseUnits(this.currencyInput.realValue)).div(this.$parseUnits(this.currencyOutput.realValue))),e=String(this.getRate());this.priceImpace=this.$formatUnits(this.$parseUnits("100").mul(this.$parseUnits(t).sub(this.$parseUnits(e)).abs()).div(this.$parseUnits(e).gt(this.$parseUnits(t))?this.$parseUnits(e):this.$parseUnits(t)))}catch(t){this.priceImpace=0}},setPriceImpace1(t){let{fromToken0:e,pairInfo:s}=this.tempPoolList[this.betterTempPoolListIndex];try{let i=e[0]?s[0].tk0Decimals:s[0].tk1Decimals,r=e.slice(-1)[0]?s.slice(-1)[0].tk1Decimals:s.slice(-1)[0].tk0Decimals,n=e[0]?s[0].gReserves0:s[0].gReserves1,a=e.slice(-1)[0]?s.slice(-1)[0].gReserves1:s.slice(-1)[0].gReserves0,o=this.$parseUnits(this.currencyInput.realValue,i),c=this.$parseUnits(this.currencyOutput.realValue,r),l=this.$formatUnits(this.$parseUnits("1").mul(n).div(a));if("input"===t){if(0==Number(this.currencyOutput.realValue))return void(this.priceImpace=0)}else if(0==Number(this.currencyInput.realValue))return void(this.priceImpace=0);let u=this.$formatUnits(this.$parseUnits("1").mul(o).div(c));this.priceImpace=this.$formatUnits(this.$parseUnits("100").mul(this.$parseUnits(u).sub(this.$parseUnits(l)).abs()).div(this.$parseUnits(l).gt(this.$parseUnits(u))?this.$parseUnits(l):this.$parseUnits(u)))}catch{this.priceImpace=0}},selectToken(t){this.currenyTokenType=t,this.selectTokenDialog=!0},setCurrency(t){var e,s;"input"===this.currenyTokenType?this.setCurrencyInput(t,!0):(this.currencyOutput.piclink=t.piclink,this.currencyOutput.symbol=t.symbol,this.currencyOutput.address=t.address,this.currencyOutput._address=(null===(e=t.address)||void 0===e?void 0:e.toLocaleLowerCase())===this.platformToken?this.wrapTokenAddress:t.address,(null===(s=t.address)||void 0===s?void 0:s.toLocaleLowerCase())===this.wrapTokenAddress&&(this.currencyOutput.symbol="BNB",this.currencyOutput.address="BNB"),this.currencyOutput.price=t.price,this.currencyOutput._price=t.price,this.currencyOutput.address===this.currencyInput.address&&(this.currencyInput={piclink:"",symbol:"",balance:"",value:"",realValue:"",address:"",_address:"",price:"",_price:""}),this.isWeb3Connected&&this.getBalance(this.currencyOutput.address,"output"));this.getPid(),this.selectTokenDialog=!1},async setNeedApprove(){if("null"===this.selectedPair.poolId)return void(this.needApprove=!1);let t="";t="EncV2Router02";const e=await u["f"](t);let{fromToken0:s,pairInfo:i}=this.tempPoolList[this.betterTempPoolListIndex],r=s[0]?i[0].tk0Decimals:i[0].tk1Decimals,n=this.$parseUnits("0"+this.currencyInput.realValue,r),a=await u["j"](n,this.currencyInput.address,e);this.needApprove=a},async onApprove(){try{this.isLoading=!0;let t="";t="EncV2Router02";const e=await u["f"](t);await u["a"](this.currencyInput.address,e),this.needApprove=!1,this.isLoading=!1}catch{this.isLoading=!1}},async onSwap(){if(this.isLoading=!0,"null"===this.selectedPair.poolId){try{var t;let e=this.$parseUnits("0"+this.currencyInput.realValue,this.selectedPair.tk0Decimals);(null===(t=this.currencyInput.address)||void 0===t?void 0:t.toLocaleLowerCase())===this.platformToken?await l["r"](e):await l["Q"](e),this.resetForm()}catch(d){console.error(d),this.isLoading=!1,this.$notify.error({title:this.$t("notify.error"),message:d.message})}return}let{fromToken0:e,pairInfo:s,poolId:i}=this.tempPoolList[this.betterTempPoolListIndex],r=e[0]?s[0].tk0Decimals:s[0].tk1Decimals,n=this.$parseUnits("0"+this.currencyInput.realValue,r),a=e.slice(-1)[0]?s.slice(-1)[0].tk1Decimals:s.slice(-1)[0].tk0Decimals,o=this.$parseUnits(this.currencyOutput.realValue,a),c=o.mul(this.$store.getters.transaction_settings.slipPoint).div("100000");try{var u,p;this.platformToken===(null===(u=this.currencyInput.address)||void 0===u?void 0:u.toLocaleLowerCase())?await l["I"](i,c,e,n):this.platformToken===(null===(p=this.currencyOutput.address)||void 0===p?void 0:p.toLocaleLowerCase())?await l["J"](i,n,c,e):await l["K"](i,n,c,e),this.resetForm()}catch(d){this.isLoading=!1,this.$notify.error({title:this.$t("notify.error"),message:d.message})}},resetForm(){this.$notify.success({title:this.$t("notify.succeeded")}),this.isLoading=!1,this.currencyInput.value="",this.currencyOutput.value="",this.currencyInput.realValue="",this.currencyOutput.realValue="",this.getBalance(this.currencyInput.address),this.getBalance(this.currencyOutput.address,"output")}}},w=C,_=(s("536f"),s("88bb"),Object(v["a"])(w,i,r,!1,null,"081ef6f6",null));e["default"]=_.exports},"006a":function(t,e,s){t.exports=s.p+"img/7.bb11ee62.svg"},"06bb":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("el-dialog",{staticClass:"select-token-dialog",attrs:{visible:t.dialog,"modal-append-to-body":!1,"before-close":t.onClose,"show-close":!1},on:{"update:visible":function(e){t.dialog=e}}},[e("div",{staticClass:"el-dialog__header__inner",attrs:{slot:"title"},slot:"title"},[e("span",{staticClass:"el-dialog__title"},[t._v(" "+t._s(t.$t("select_token.select_token"))+" ")]),e("svg",{staticClass:"close-svg",attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},on:{click:t.onCloseDialog}},[e("path",{attrs:{d:"M18 6L6 18","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),e("path",{attrs:{d:"M6 6L18 18","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])]),e("div",{staticClass:"search-box"},[e("el-input",{staticClass:"search-input",attrs:{placeholder:t.$t("select_token.search_name_address")},on:{input:t.onSearchTokenInput},model:{value:t.searchToken,callback:function(e){t.searchToken=e},expression:"searchToken"}})],1),e("el-scrollbar",{staticStyle:{height:"440px"}},[t.activeCoinList.length?e("div",{staticClass:"token-list"},t._l(t.activeCoinList,(function(i){return e("div",{key:i.address,staticClass:"item",on:{click:function(e){return t.onClickTokenItem(i)}}},[(i.piclink,e("img",{staticClass:"icon",attrs:{src:s("006a"),alt:""}})),e("div",{staticClass:"text"},[e("div",{staticClass:"name"},[t._v(t._s(i.symbol))]),e("div",{staticClass:"from"},[t._v(t._s(t._f("addressFilter")(i.address)))])])])})),0):e("div",{staticClass:"no-data"},[e("div",{staticClass:"text"},[t._v(t._s(t.$t("select_token.no_data")))])])])],1)},r=[],n=s("365c"),a=s("26ba"),o={name:"SelectToken",props:{selectTokenDialog:{type:Boolean}},computed:{isWeb3Connected(){return this.$store.getters.isWeb3Connected},networkName(){return this.$store.getters.network}},data(){return{dialog:!1,inputTimer:null,searchToken:"",activeCoinList:[]}},watch:{selectTokenDialog(t){this.dialog=t,t?this.activeCoinList=[{id:18,network:"BscMainnet",symbol:"ETH",address:"0x2170ed0880ac9a755fd29b2688956bd959f933f8",decimal:18},{id:18,network:"BscMainnet",symbol:"BTC",address:"0x7130d2a12b9bcbfae4f2634d864a1ee1ce3ead9c",decimal:18},{id:18,network:"BscMainnet",symbol:"USDT",address:"0x55d398326f99059ff775485246999027b3197955",decimal:18},{id:18,network:"BscMainnet",symbol:"BNB",address:"0xbb4cdb9cbd36b01bd1cbaebf2de08d9173bc095c",decimal:18},{id:18,network:"BscMainnet",symbol:"STORE",address:"0x65d9033cff96782394dab5dbef17fa771bbe1732",decimal:18}]:this.searchToken=""}},methods:{onCloseDialog(){this.dialog=!1,this.$emit("closeDialog","")},onClose(t){this.onCloseDialog(),t()},onClickTokenItem(t){t.isContractCoin&&Object(n["h"])({network:t.network,symbol:t.symbol,address:t.address}),this.$emit("setCurrency",t)},debounce(t,e,s=200){this.inputTimer&&clearTimeout(this.inputTimer),this.inputTimer=setTimeout(()=>{t(e)},s)},onSearchTokenInput(){this.debounce(this.getSelectcoin,null,200)},async getSelectcoin(){let t={info:this.searchToken,network:this.networkName};Object(n["j"])(t).then(t=>{"200"===t.code&&(0===t.result.length?this.$isAddress(this.searchToken)&&this.isWeb3Connected?a["y"](this.searchToken).then(t=>{this.activeCoinList=[{address:this.searchToken.toLowerCase(),ismainstream:"",level:"",network:this.networkName,piclink:s("006a"),price:"",projectname:null,rgb:"",symbol:t,textlogo:null,isContractCoin:!0}]}).catch(t=>{this.activeCoinList=[]}):this.activeCoinList=[]:this.activeCoinList=t.result)})}}},c=o,l=(s("30fd"),s("2877")),u=Object(l["a"])(c,i,r,!1,null,"fce802f8",null);e["a"]=u.exports},"30fd":function(t,e,s){"use strict";s("ac96")},"536f":function(t,e,s){"use strict";s("612b")},"612b":function(t,e,s){},"645e":function(t,e,s){},"88bb":function(t,e,s){"use strict";s("be8a")},ab57:function(t,e,s){"use strict";s("645e")},ac96:function(t,e,s){},be8a:function(t,e,s){}}]);