(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2181448d"],{"006a":function(t,e,i){t.exports=i.p+"img/7.bb11ee62.svg"},"3c2f":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"liquidity-container"},[t.liquidityList.length?e("div",{staticClass:"list"},t._l(t.liquidityList,(function(s,a){return e("div",{key:s.poolid,staticClass:"item"},[0==a?e("div",{staticClass:"item-title item-title2 flex aic"},[e("span",{staticClass:"txt"},[t._v(t._s(t.$t("liquidity_index.your_liquidity")))]),e("span",{staticClass:"txt1"}),e("span",{staticClass:"txt1"},[t.isWeb3Connected&&t.$store.state.environment.networkReady?e("div",{staticClass:"add-liquidity flex aic jcc",on:{click:t.goAddLiquidity}},[e("svg",{staticClass:"img",attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M2 12H22","stroke-width":"2","stroke-linecap":"round"}}),e("path",{attrs:{d:"M12 2L12 22","stroke-width":"2","stroke-linecap":"round"}})]),e("span",{staticClass:"txt"},[t._v(t._s(t.$t("liquidity_index.add_liquidity")))])]):e("connect-wallet-btn",{attrs:{text:t.$t("connect_wallet_btn.connect_wallet")}})],1)]):t._e(),0==a?e("div",{staticClass:"item-title1 flex aic"},[e("span",{staticClass:"txt"},[t._v(t._s(t.$t("liquidity_index.pair")))]),e("span",{staticClass:"txt1"},[t._v(t._s(t.$t("liquidity_index.tvl")))]),e("span",{staticClass:"txt1"},[t._v(t._s(t.$t("liquidity_index.deposited")))])]):t._e(),s.tk1?e("div",{staticClass:"item-card card"},[e("div",{staticClass:"card-inner"},[e("div",{staticClass:"card-header flex aic jcsb",on:{click:function(e){return t.slideToggle(s)}}},[e("div",{staticClass:"currency-pair flex aic f1"},[e("div",{staticClass:"img-box"},[s.tk1.logoURI?e("img",{staticClass:"img1",attrs:{src:s.tk1.logoURI,alt:""}}):e("img",{staticClass:"img1",attrs:{src:i("006a"),alt:""}}),s.tk2.logoURI?e("img",{staticClass:"img2",attrs:{src:s.tk2.logoURI,alt:""}}):e("img",{staticClass:"img2",attrs:{src:i("006a"),alt:""}})]),e("span",{staticClass:"text"},[t._v(t._s(s.poolname))])]),e("div",{staticClass:"liquidity flex fdc jcc aic f1 tac"},[e("div",{staticClass:"value"},[t._v(t._s(t._f("fixedFormatNum")(s.liquidity)))]),e("span",{staticClass:"dollar"},[t._v("~$ "+t._s(t.getDollar(s.liquidity,s.priceOfStakedToken)))])]),e("div",{staticClass:"deposited flex fdc jcc aic f1 tac"},["0"===s.deposited?e("div",{staticClass:"el-icon-loading"}):e("div",{staticClass:"value"},[t._v(" "+t._s(t._f("fixedFormatNum")(s.deposited))+" ")]),e("span",{staticClass:"dollar"},[t._v("~$ "+t._s(t.getDollar(s.deposited,s.priceOfStakedToken)))])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:s.isOpen,expression:"item.isOpen"}],staticClass:"card-body"},[e("div",{staticClass:"change-liquidity flex aic jcsb"},[e("div",{staticClass:"fl flex aic"},[e("div",{staticClass:"img-box flex aic"},[e("el-switch",{staticClass:"liquidity",model:{value:s.isAdd,callback:function(e){t.$set(s,"isAdd",e)},expression:"item.isAdd"}}),e("span",{staticClass:"text"},[t._v(t._s(s.isAdd?t.$t("liquidity_index.add_liquidity"):t.$t("liquidity_index.remove_liquidity")))])],1)])]),s.isAdd?[e("div",{staticClass:"add-liquidity-body"},[e("div",{staticClass:"add-item flex aic jcsb"},[e("div",{staticClass:"fl flex aic"},[s.tk1.logoURI?e("img",{staticClass:"img",attrs:{src:s.tk1.logoURI,alt:""}}):e("img",{staticClass:"img",attrs:{src:i("006a"),alt:""}}),e("el-button",{directives:[{name:"show",rawName:"v-show",value:""!==s.tk1.balance,expression:"item.tk1.balance !== ''"}],on:{click:function(e){return t.onInputAdd(s,"1",!0)}}},[t._v(t._s(t.$t("btn.max")))]),e("el-input",{attrs:{placeholder:"0.0"},on:{input:function(e){return t.onInputAdd(s,"1")}},model:{value:s.tk1.val,callback:function(e){t.$set(s.tk1,"val",e)},expression:"item.tk1.val"}})],1),e("div",{staticClass:"fr flex fdc aife"},[s.hasWBNB&&!s.isWBNB&&t.$BigNumber.from(s.tk1.address).eq(t.wrapTokenAddress)?[e("span",{directives:[{name:"show",rawName:"v-show",value:""!==s.tk1.balance,expression:"item.tk1.balance !== ''"}],staticClass:"text"},[t._v(t._s(t._f("fixedFormatNum")(s.tk1.balance))+" "+t._s(t.tokenName[t.walletInfo.chainId]))]),e("span",{staticClass:"text text1"},[t._v("≈$ "+t._s(t.getDollar(s.tk1.realVal,s.tk1.price)))])]:[e("span",{directives:[{name:"show",rawName:"v-show",value:""!==s.tk1.balance,expression:"item.tk1.balance !== ''"}],staticClass:"text"},[t._v(t._s(t._f("fixedFormatNum")(s.tk1.balance))+" "+t._s(s.tk1.symbol))]),e("span",{staticClass:"text text1"},[t._v("≈$ "+t._s(t.getDollar(s.tk1.realVal,s.tk1.price)))])]],2)]),e("div",{staticClass:"add-item flex aic jcsb"},[e("div",{staticClass:"fl flex aic"},[s.tk2.logoURI?e("img",{staticClass:"img",attrs:{src:s.tk2.logoURI,alt:""}}):e("img",{staticClass:"img",attrs:{src:i("006a"),alt:""}}),e("el-button",{directives:[{name:"show",rawName:"v-show",value:""!==s.tk2.balance,expression:"item.tk2.balance !== ''"}],on:{click:function(e){return t.onInputAdd(s,"2",!0)}}},[t._v(t._s(t.$t("btn.max")))]),e("el-input",{attrs:{placeholder:"0.0"},on:{input:function(e){return t.onInputAdd(s,"2")}},model:{value:s.tk2.val,callback:function(e){t.$set(s.tk2,"val",e)},expression:"item.tk2.val"}})],1),e("div",{staticClass:"fr flex fdc aife"},[s.hasWBNB&&!s.isWBNB&&t.$BigNumber.from(s.tk2.address).eq(t.wrapTokenAddress)?[e("span",{directives:[{name:"show",rawName:"v-show",value:""!==s.tk2.balance,expression:"item.tk2.balance !== ''"}],staticClass:"text"},[t._v(t._s(t._f("fixedFormatNum")(s.tk2.balance))+" "+t._s(t.tokenName[t.walletInfo.chainId]))]),e("span",{staticClass:"text text1"},[t._v("≈$ "+t._s(t.getDollar(s.tk2.realVal,s.tk2.price)))])]:[e("span",{directives:[{name:"show",rawName:"v-show",value:""!==s.tk2.balance,expression:"item.tk2.balance !== ''"}],staticClass:"text"},[t._v(t._s(t._f("fixedFormatNum")(s.tk2.balance))+" "+t._s(s.tk2.symbol))]),e("span",{staticClass:"text text1"},[t._v("≈$ "+t._s(t.getDollar(s.tk2.realVal,s.tk2.price)))])]],2)])]),s.hasWBNB?e("div",{staticClass:"switch"},[e("span",{directives:[{name:"show",rawName:"v-show",value:s.isWBNB,expression:"item.isWBNB"}],staticClass:"text",on:{click:function(e){return t.onSwitch(s)}}},[t._v(t._s(t.$t("liquidity_index.use"))+" "+t._s(t.tokenName[t.walletInfo.chainId])+" "+t._s(t.$t("liquidity_index.instead_of"))+" "+t._s(t.$store.state.environment.wrapTokenSymbol))]),e("span",{directives:[{name:"show",rawName:"v-show",value:!s.isWBNB,expression:"!item.isWBNB"}],staticClass:"text",on:{click:function(e){return t.onSwitch(s)}}},[t._v(t._s(t.$t("liquidity_index.use"))+" "+t._s(t.$store.state.environment.wrapTokenSymbol)+" "+t._s(t.$t("liquidity_index.instead_of"))+" "+t._s(t.tokenName[t.walletInfo.chainId]))])]):t._e(),t.isWeb3Connected&&t.$store.state.environment.networkReady?""===s.tk1.realVal||""===s.tk2.realVal?e("el-button",{staticClass:"enter-amount"},[t._v(t._s(t.$t("liquidity_index.enter_amount")))]):Number(s.tk1.realVal)>Number(s.tk1.balance)||Number(s.tk2.realVal)>Number(s.tk2.balance)?e("el-button",{staticClass:"enter-amount"},[t._v(t._s(t.$t("liquidity_index.insufficient_liquidity")))]):s.approve.needApproveCurrencyInput||s.approve.needApproveCurrencyOutput?e("div",{staticClass:"approve-box"},[s.approve.needApproveCurrencyInput?e("div",[e("el-button",{staticClass:"enter-amount ac",class:{"is-first":s.approve.needApproveCurrencyOutput},attrs:{loading:s.approve.approveCurrencyInputLoading},on:{click:function(e){return t.onApproveAdd(s,"input")}}},[t._v(t._s(t.$t("btn.approve"))+" "+t._s(s.tk1.symbol))])],1):t._e(),s.approve.needApproveCurrencyOutput?e("div",[e("el-button",{staticClass:"enter-amount ac",attrs:{loading:s.approve.approveCurrencyOutputLoading},on:{click:function(e){return t.onApproveAdd(s,"output")}}},[t._v(t._s(t.$t("btn.approve"))+" "+t._s(s.tk2.symbol))])],1):t._e()]):e("el-button",{staticClass:"enter-amount ac",attrs:{loading:s.isAddLoading},on:{click:function(e){return t.onAddLiquidity(s)}}},[t._v(t._s(t.$t("liquidity_index.add_liquidity")))]):e("connect-wallet-btn",{staticClass:"enter-amount btn",attrs:{text:t.$t("connect_wallet_btn.connect_wallet")}})]:[e("div",{staticClass:"liquidity-amount flex aic jcsb"},[e("div",{staticClass:"label"},[t._v(" "+t._s(t.$t("liquidity_index.amount_remove"))+" ")]),e("div",{staticClass:"input-box flex aic jcc",class:{ac:s.remove.percent}},[e("el-input",{attrs:{placeholder:"0",maxlength:"3"},on:{input:function(e){return t.onInputRemove(s)}},model:{value:s.remove.percent,callback:function(e){t.$set(s.remove,"percent",e)},expression:"item.remove.percent"}}),e("span",{staticClass:"percent"},[t._v("%")])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:""!==s.deposited,expression:"item.deposited !== ''"}],staticClass:"fr flex aic jcfe"},[e("el-button",{staticClass:"sm-hidden",class:{ac:"25"==s.remove.percent},on:{click:function(e){return t.onChangePercent(s,"25")}}},[t._v("25%")]),e("el-button",{staticClass:"sm-hidden",class:{ac:"50"==s.remove.percent},on:{click:function(e){return t.onChangePercent(s,"50")}}},[t._v("50%")]),e("el-button",{staticClass:"sm-hidden",class:{ac:"75"==s.remove.percent},on:{click:function(e){return t.onChangePercent(s,"75")}}},[t._v("75%")]),e("el-button",{class:{ac:"100"==s.remove.percent},on:{click:function(e){return t.onChangePercent(s,"100")}}},[t._v(t._s(t.$t("btn.max")))])],1)]),Number("0"+s.remove.val)?e("div",{staticClass:"will-receive"},[e("div",{staticClass:"item flex aic jcsb"},[e("div",{staticClass:"val"},[t._v(" "+t._s(t._f("toThousands")(s.remove.received1,4))+" ")]),e("div",{staticClass:"coin flex aic"},[s.tk1.logoURI?e("img",{staticClass:"img1",attrs:{src:s.tk1.logoURI,alt:""}}):e("img",{staticClass:"img1",attrs:{src:i("006a"),alt:""}}),e("span",{staticClass:"text"},[t._v(t._s(s.hasWBNB&&!s.isWBNB&&t.$BigNumber.from(s.tk1.address).eq(t.wrapTokenAddress)?t.tokenName[t.walletInfo.chainId]:s.tk1.symbol))])])]),e("div",{staticClass:"item flex aic jcsb"},[e("div",{staticClass:"val"},[t._v(" "+t._s(t._f("toThousands")(s.remove.received2,4))+" ")]),e("div",{staticClass:"coin flex aic"},[s.tk2.logoURI?e("img",{staticClass:"img2",attrs:{src:s.tk2.logoURI,alt:""}}):e("img",{staticClass:"img2",attrs:{src:i("006a"),alt:""}}),e("span",{staticClass:"text"},[t._v(t._s(s.hasWBNB&&!s.isWBNB&&t.$BigNumber.from(s.tk2.address).eq(t.wrapTokenAddress)?t.tokenName[t.walletInfo.chainId]:s.tk2.symbol))])])])]):t._e(),s.hasWBNB?e("div",{staticClass:"switch"},[e("span",{directives:[{name:"show",rawName:"v-show",value:s.isWBNB,expression:"item.isWBNB"}],staticClass:"text",on:{click:function(e){return t.onSwitch(s)}}},[t._v(t._s(t.$t("liquidity_index.use"))+" "+t._s(t.tokenName[t.walletInfo.chainId])+" "+t._s(t.$t("liquidity_index.instead_of"))+" "+t._s(t.$store.state.environment.wrapTokenSymbol))]),e("span",{directives:[{name:"show",rawName:"v-show",value:!s.isWBNB,expression:"!item.isWBNB"}],staticClass:"text",on:{click:function(e){return t.onSwitch(s)}}},[t._v(t._s(t.$t("liquidity_index.use"))+" "+t._s(t.$store.state.environment.wrapTokenSymbol)+" "+t._s(t.$t("liquidity_index.instead_of"))+" "+t._s(t.tokenName[t.walletInfo.chainId]))])]):t._e(),t.isWeb3Connected&&t.$store.state.environment.networkReady?Number("0"+s.remove.val)?Number(s.remove.val)>Number(s.deposited)?e("el-button",{staticClass:"enter-amount"},[t._v(t._s(t.$t("liquidity_index.insufficient_liquidity")))]):s.needRemoveApprove?e("el-button",{staticClass:"enter-amount ac approve",attrs:{loading:s.isRemoveLoading},on:{click:function(e){return t.onApprove(s)}}},[t._v(t._s(t.$t("btn.approve")))]):e("el-button",{staticClass:"enter-amount ac",attrs:{loading:s.isRemoveLoading},on:{click:function(e){return t.onRemoveLiquidity(s)}}},[t._v(t._s(t.$t("liquidity_index.remove_liquidity")))]):e("el-button",{staticClass:"enter-amount"},[t._v(t._s(t.$t("liquidity_index.enter_amount")))]):e("connect-wallet-btn",{attrs:{text:t.$t("connect_wallet_btn.connect_wallet")}})]],2)])]):t._e()])})),0):e("div",{staticClass:"no-data list"},[e("div",{staticClass:"item"},[e("div",{staticClass:"item-title item-title2 flex aic"},[e("span",{staticClass:"txt"},[t._v(t._s(t.$t("liquidity_index.your_liquidity")))]),e("span",{staticClass:"txt1"}),e("span",{staticClass:"txt1"},[t.isWeb3Connected&&t.$store.state.environment.networkReady?e("div",{staticClass:"add-liquidity flex aic jcc",on:{click:t.goAddLiquidity}},[e("svg",{staticClass:"img",attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M2 12H22","stroke-width":"2","stroke-linecap":"round"}}),e("path",{attrs:{d:"M12 2L12 22","stroke-width":"2","stroke-linecap":"round"}})]),e("span",{staticClass:"txt"},[t._v(t._s(t.$t("liquidity_index.add_liquidity")))])]):e("connect-wallet-btn",{attrs:{text:t.$t("connect_wallet_btn.connect_wallet")}})],1)]),e("div",{staticClass:"item-title1 flex aic"},[e("span",{staticClass:"txt"},[t._v(t._s(t.$t("liquidity_index.pair")))]),e("span",{staticClass:"txt1"},[t._v(t._s(t.$t("liquidity_index.tvl")))]),e("span",{staticClass:"txt1"},[t._v(t._s(t.$t("liquidity_index.deposited")))])]),e("div",{staticClass:"item-card card"},[t._v(" "+t._s(t.$t("liquidity_index.no_liquidity"))+" ")])])])])},a=[],o=(i("14d9"),i("ed08")),r=i("365c"),n=i("6393"),l=i("26ba"),d=i("3908"),c={name:"Liquidity",mixins:[],components:{},props:{},data(){return{liquidityList:[],inputTimer:null,tokenName:n["i"]()}},filters:{},computed:{isWeb3Connected(){return this.$store.getters.isWeb3Connected},walletInfo(){return this.$store.getters.walletInfo},version(){return this.$store.state.environment.version},wrapTokenAddress(){return this.$store.getters.wrapTokenAddress},platformToken(){return this.$store.getters.platformToken},projectid(){return this.$store.getters.projectid},networkName(){return this.$store.getters.network}},watch:{"$store.getters.walletInfo":{deep:!0,handler(){this.getpoolbyadmin()}}},created(){Object(d["b"])()},activated(){this.getpoolbyadmin()},deactivated(){},mounted(){},destroyed(){},methods:{goAddLiquidity(){this.$router.push({path:"/trade/addliquidity",query:this.$route.query})},async getpoolbyadmin(){if(!this.isWeb3Connected)return void Object(d["a"])();if(!this.networkName){try{await Object(r["k"])({projectid:"",domain:location.hostname})}catch(s){return void console.error(s)}Object(d["a"])()}let t=n["d"](this.networkName);const e=await n["g"]("SwapPoolERC20",String(Number(t)));let i;try{i=await n["f"]("EncV2Router02")}catch{i=""}Object(r["f"])({network:this.networkName,poolAddress:e.toLowerCase(),admin:this.walletInfo.address.toLowerCase(),projectid:this.projectid,routerAddress:i.toLowerCase()}).then(t=>{if("200"===t.code){if(!t.result)return Object(d["a"])(),void(this.liquidityList=[]);this.liquidityList.length?this.liquidityList=t.result.map((t,e)=>Object.assign({},this.liquidityList[e]?this.liquidityList[e]:{tk1:{balance:"",val:"",realVal:"",address:t.token0address,symbol:t.token0symbol,logoURI:t.token0logo,price:t.priceOfTk0,decimals:""},tk2:{balance:"",val:"",realVal:"",address:t.token1address,symbol:t.token1symbol,logoURI:t.token1logo,price:t.priceOfTk1,decimals:""},liquidity:"0",deposited:"0",_deposited:"0",isOpen:this.$route.query.poolid?t.poolid==this.$route.query.poolid:0===e,isAdd:!0,isAddLoading:!1,isRemoveLoading:!1,poolAssets:[],remove:{percent:"",val:"",received1:"",received2:""},isWBNB:!1,hasWBNB:this.$BigNumber.from(t.token0address).eq(this.wrapTokenAddress)||this.$BigNumber.from(t.token1address).eq(this.wrapTokenAddress),needRemoveApprove:!0,approve:{needApproveCurrencyInput:!0,needApproveCurrencyOutput:!0,approveCurrencyInputLoading:!1,approveCurrencyOutputLoading:!1}},t)):this.liquidityList=t.result.map((t,e)=>Object.assign({},{tk1:{balance:"",val:"",realVal:"",address:t.token0address,symbol:t.token0symbol,logoURI:t.token0logo,price:t.priceOfTk0,decimals:""},tk2:{balance:"",val:"",realVal:"",address:t.token1address,symbol:t.token1symbol,logoURI:t.token1logo,price:t.priceOfTk1,decimals:""},liquidity:"0",deposited:"0",_deposited:"0",isOpen:this.$route.query.poolid?t.poolid==this.$route.query.poolid:0===e,isAdd:!0,isAddLoading:!1,isRemoveLoading:!1,poolAssets:[],remove:{percent:"",val:"",received1:"",received2:""},isWBNB:!1,hasWBNB:this.$BigNumber.from(t.token0address).eq(this.wrapTokenAddress)||this.$BigNumber.from(t.token1address).eq(this.wrapTokenAddress),needRemoveApprove:!0,approve:{needApproveCurrencyInput:!0,needApproveCurrencyOutput:!0,approveCurrencyInputLoading:!1,approveCurrencyOutputLoading:!1}},t)),this.isWeb3Connected&&(Object(d["a"])(),this.liquidityList[0]&&(async()=>{let t=()=>new Promise(t=>{(async()=>{await this.getLiquidity(this.liquidityList[0]),t()})()});try{await t();for(let t of this.liquidityList.slice(1))await this.getLiquidity(t);for(let t of this.liquidityList)await this.setLiquidityDetail(t),await this.setRemoveNeedApprove(t),await this.setAddNeedApprove(t)}catch{}})())}})},async setLiquidityDetail(t){try{let e,i;t.isFirstAddLiquidity=await this.isFirstAddLiquidity(t.poolid),t.hasWBNB&&!t.isWBNB?(this.$BigNumber.from(t.tk1.address).eq(this.wrapTokenAddress)&&(e=await l["j"](this.platformToken),i=await l["j"](t.tk2.address)),this.$BigNumber.from(t.tk2.address).eq(this.wrapTokenAddress)&&(e=await l["j"](t.tk1.address),i=await l["j"](this.platformToken))):(e=await l["j"](t.tk1.address),i=await l["j"](t.tk2.address)),t.tk1.balance=this.$formatUnits(e),t.tk2.balance=this.$formatUnits(i);let s=l["x"](t.tk1.address),a=l["x"](t.tk2.address);t.tk1.decimals=await s,t.tk2.decimals=await a,await this.getDeposited(t)}catch(e){}},async setRemoveNeedApprove(t,e="0"){if("v2_0"!==this.version){const i=await n["f"]("EncV2Router02"),s=await l["B"](t.poolid,i);s.gt(e)?t.needRemoveApprove=!1:t.needRemoveApprove=!0}},async setAddNeedApprove(t){try{let e="EncV2Router02";"v2_0"===this.version&&(e="SwapPoolERC20");const i=await n["f"](e);let s=t.tk1.decimals,a=t.tk2.decimals,o=this.$parseUnits("0"+(t.tk1.realValue?t.tk1.realValue:""),s),r=this.$parseUnits("0"+(t.tk2.realValue?t.tk2.realValue:""),a),l=t.hasWBNB&&!t.isWBNB&&t.tk1.address.toLocaleLowerCase()==this.wrapTokenAddress?this.platformToken:t.tk1.address,d=t.hasWBNB&&!t.isWBNB&&t.tk2.address.toLocaleLowerCase()==this.wrapTokenAddress?this.platformToken:t.tk2.address,c=await n["j"](o,l,i);t.approve.needApproveCurrencyInput=c;let u=await n["j"](r,d,i);t.approve.needApproveCurrencyOutput=u}catch(e){}},onSwitch(t){t.isWBNB=!t.isWBNB,this.setLiquidityDetail(t),this.setAddNeedApprove(t)},slideToggle(t){t.isOpen=!t.isOpen},async onInputRemove(t){t.remove.percent=Object(o["f"])(t.remove.percent,!1),Number(t.remove.percent)>100&&(t.remove.percent="100"),t.remove.val=this.$formatUnits(t._deposited.mul(Number(t.remove.percent)).div(100)),this.setReceived(t),Number("0"+t.remove.val)},onChangePercent(t,e){t.remove.percent=e,t.remove.val=this.$formatUnits(t._deposited.mul(Number(t.remove.percent)).div(100)),this.setReceived(t)},async setReceived(t){await this.getLiquidity(t),t.remove.received1=this.$formatUnits(t.poolAssets.gReserves0.mul(t._deposited.mul(Number(t.remove.percent)).div(100)).div(t.poolAssets.globalLpAmount),t.tk1.decimals),t.remove.received2=this.$formatUnits(t.poolAssets.gReserves1.mul(t._deposited.mul(Number(t.remove.percent)).div(100)).div(t.poolAssets.globalLpAmount),t.tk2.decimals);let e=this.$parseUnits("0"+t.remove.val,18);this.setRemoveNeedApprove(t,e)},debounce(t,e,i,s,a=200){this.inputTimer&&clearTimeout(this.inputTimer),this.inputTimer=setTimeout(()=>{t(e,i,s)},a)},onInputAdd(t,e,i=!1){this.debounce((t,e,i)=>{"1"===e?(t.tk1.val=i?t.tk1.balance:Object(o["f"])(t.tk1.val,!0),t.tk1.realVal=i?t.tk1.balance:Object(o["f"])(t.tk1.val,!0),isNaN(t.tk1.val)||t.isFirstAddLiquidity||this.getAmountOut(t,!0).then(e=>{t.tk2.val=Number("0"+t.tk1.val)?this.$exponentialToNumber1(e):"",t.tk2.realVal=Number("0"+t.tk1.val)?e:""}).catch(()=>{t.tk2.val="",t.tk2.realVal=""})):"2"===e&&(t.tk2.val=i?t.tk2.balance:Object(o["f"])(t.tk2.val,!0),t.tk2.realVal=i?t.tk2.balance:Object(o["f"])(t.tk2.val,!0),isNaN(t.tk2.val)||t.isFirstAddLiquidity||this.getAmountOut(t,!1).then(e=>{t.tk1.val=Number("0"+t.tk2.val)?this.$exponentialToNumber1(e):"",t.tk1.realVal=Number("0"+t.tk2.val)?e:""}).catch(()=>{t.tk1.val="",t.tk1.realVal=""}))},t,e,i)},async isFirstAddLiquidity(t){let e=await l["C"](t),i=e.reserves0,s=e.reserves1;return 0===Number(i)&&0===Number(s)},async getAmountOut(t,e){let i=e?t.tk1.val:t.tk2.val,s=await l["C"](t.poolid);if(e)try{let e=this.$formatUnits(s.gReserves1.mul(this.$parseUnits(i,t.tk1.decimals)).div(s.gReserves0),t.tk2.decimals);return e}catch{return""}else try{let e=this.$formatUnits(s.gReserves0.mul(this.$parseUnits(i,t.tk2.decimals)).div(s.gReserves1),t.tk1.decimals);return e}catch{return""}},async getLiquidity(t){try{let e=await l["C"](t.poolid);t.liquidity=this.$formatUnits(e.poolLpAmount,18),t.poolAssets=e}catch(e){if(!e.message.includes("Contract not found in config of"))throw e}},async getDeposited(t){let e=t.poolid,i=await l["k"](e);t.deposited=this.$formatUnits(i,18),t._deposited=i},async onAddLiquidity(t){let e,i;t.isAddLoading=!0;let s,a=t.tk1.address,o=t.tk2.address;try{a.toLocaleLowerCase()!==this.wrapTokenAddress||t.isWBNB?o.toLocaleLowerCase()!==this.wrapTokenAddress||t.isWBNB||(s=this.$parseUnits("0"+t.tk2.realVal,t.tk2.decimals)):s=this.$parseUnits("0"+t.tk1.realVal,t.tk1.decimals),e=this.$parseUnits("0"+t.tk1.realVal,t.tk1.decimals),i=this.$parseUnits("0"+t.tk2.realVal,t.tk2.decimals)}catch(d){return t.isAddLoading=!1,this.$notify.error({title:this.$t("notify.error"),message:"Enter an Amount"}),void console.error(d)}let r=t.poolid;try{s?await l["e"](r,e,i,s):await l["f"](r,e,i),this.$notify.success({title:this.$t("notify.succeeded")}),t.tk1.val="",t.tk2.val="",t.tk1.realVal="",t.tk2.realVal="",t.isAddLoading=!1,this.resetForm(t);const a=await n["f"]("SwapPoolERC20");this.requestAddLiquidity({admin:this.walletInfo.address.toLocaleLowerCase(),poolid:r,pooladdress:a.toLocaleLowerCase(),projectid:this.projectid,network:this.networkName})}catch(c){return t.isAddLoading=!1,void this.$notify.error({title:this.$t("notify.error"),message:c.message})}},requestAddLiquidity(t){Object(r["a"])(t).then(t=>{"200"==t.code||console.error("addLiquidity_error")})},async onApprove(t){t.isRemoveLoading=!0;const e=await n["f"]("EncV2Router02");try{await l["i"](t.poolid,e),t.needRemoveApprove=!1,t.isRemoveLoading=!1,this.$notify.success({title:this.$t("notify.succeeded")})}catch(i){t.isRemoveLoading=!1,this.$notify.error({title:this.$t("notify.error"),message:i.message})}},async onApproveAdd(t,e){let i="EncV2Router02";"v2_0"===this.version&&(i="SwapPoolERC20");const s=await n["f"](i);if("input"===e)try{t.approve.approveCurrencyInputLoading=!0,await n["a"](t.tk1.address,s),t.approve.needApproveCurrencyInput=!1,t.approve.approveCurrencyInputLoading=!1}catch{t.approve.approveCurrencyInputLoading=!1}else try{t.approve.approveCurrencyOutputLoading=!0,await n["a"](t.tk2.address,s),t.approve.needApproveCurrencyOutput=!1,t.approve.approveCurrencyOutputLoading=!1}catch{t.approve.approveCurrencyOutputLoading=!1}},async onRemoveLiquidity(t){t.isRemoveLoading=!0;let e=t.poolid,i=this.$parseUnits("0"+t.remove.val,18);try{t.hasWBNB&&!t.isWBNB?await l["D"](i,e):await l["E"](i,e),this.$notify.success({title:this.$t("notify.succeeded")}),t.remove.val="",t.remove.percent="",t.isRemoveLoading=!1,this.resetForm(t)}catch(s){return t.isRemoveLoading=!1,void this.$notify.error({title:this.$t("notify.error"),message:s.message})}},async resetForm(t){this.getLiquidity(t),this.setLiquidityDetail(t)}}},u=c,p=(i("4bfa"),i("2877")),v=Object(p["a"])(u,s,a,!1,null,"168895ce",null);e["default"]=v.exports},"4bfa":function(t,e,i){"use strict";i("b6d7")},b6d7:function(t,e,i){}}]);